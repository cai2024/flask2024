{"code": "gASVqwsAAAAAAAAoQyqXAHQBAAAAAAAAAAAAAGQBfA18EKwCpgMAAKsDAAAAAAAAAAABAGQAUwCUKIwFaW5wdXSUjAZvdXRwdXSUjAZwYXJhbXOUjAl3aWxkY2FyZHOUjAd0aHJlYWRzlIwJcmVzb3VyY2VzlIwDbG9nlIwEcnVsZZSMCWNvbmRhX2VudpSMDWNvbnRhaW5lcl9pbWeUjBBzaW5ndWxhcml0eV9hcmdzlIwPdXNlX3Npbmd1bGFyaXR5lIwLZW52X21vZHVsZXOUjAxiZW5jaF9yZWNvcmSUjAVqb2JpZJSMCGlzX3NoZWxslIwPYmVuY2hfaXRlcmF0aW9ulIwPY2xlYW51cF9zY3JpcHRzlIwKc2hhZG93X2RpcpSMDWVkaXRfbm90ZWJvb2uUjA9jb25kYV9iYXNlX3BhdGiUjAdiYXNlZGlylIwQc291cmNlY2FjaGVfcGF0aJSMGHJ1bnRpbWVfc291cmNlY2FjaGVfcGF0aJSMGF9faXNfc25ha2VtYWtlX3J1bGVfZnVuY5R0lF2UKE5Y/AkAAAogICAgICAgIG5hbWU9JChlY2hvIHtwYXJhbXMubXlfc2FtcGxlfSkKICAgICAgICByYXdfc2l6ZT0kKHB5dGhvbjMge2dldF9qc29ufSB7aW5wdXQuanNvbn0gc3VtbWFyeSxiZWZvcmVfZmlsdGVyaW5nLHRvdGFsX2Jhc2VzKQogICAgICAgIHJhd19yZWFkX251bT0kKHB5dGhvbjMge2dldF9qc29ufSB7aW5wdXQuanNvbn0gc3VtbWFyeSxiZWZvcmVfZmlsdGVyaW5nLHRvdGFsX3JlYWRzKQogICAgICAgIGR1cF9yYWRpbzE9JChweXRob24zIHtnZXRfanNvbn0ge2lucHV0Lmpzb259IGR1cGxpY2F0aW9uLHJhdGUpCgogICAgICAgIGNsZWFuX3JlYWRfbnVtPSQoc2FtdG9vbHMgdmlldyAtYyB7aW5wdXQuYmFtfSkgCiAgICAgICAgZGVfcmVhZF9udW09JChzYW10b29scyB2aWV3IC1jIHtpbnB1dC5kZWR1cF9iYW19KQogICAgICAgIG1hcF9yZWFkX251bT0kKHNhbXRvb2xzIHZpZXcgLWMgLUYgNCB7aW5wdXQuYmFtfSkKICAgICAgICAKICAgICAgICBjb3Zlcj0kKHNlZCAtbiAncy8uKlRoZXJlIGlzIGEgXChbMC05Ll0qXClcJSBvZiByZWZlcmVuY2Ugd2l0aCBhIGNvdmVyYWdlRGF0YSA+PSAxWC4qL1wxL3AnIHtpbnB1dC5jb3Zlcn0pCiAgICAgICAgcmVmX3NpemU9JChzZWQgLW4gJ3MvLipudW1iZXIgb2YgYmFzZXMgPSBcKFswLTksXSpcKSBicC4qL1wxL3AnIHtpbnB1dC5jb3Zlcn0gfCB0ciAtZCAnLCcpCiAgICAgICAgbWFwX3NpemU9JChzZWQgLW4gJ3MvLipudW1iZXIgb2YgbWFwcGVkIGJhc2VzID0gXChbMC05LF0qXCkgYnAuKi9cMS9wJyB7aW5wdXQuY292ZXJ9IHwgdHIgLWQgJywnKQoKICAgICAgICBnYz0kKHB5dGhvbjMge2dldF9qc29ufSB7aW5wdXQuanNvbn0gc3VtbWFyeSxhZnRlcl9maWx0ZXJpbmcsZ2NfY29udGVudCkKICAgICAgICBxMjA9JChweXRob24zIHtnZXRfanNvbn0ge2lucHV0Lmpzb259IHN1bW1hcnksYWZ0ZXJfZmlsdGVyaW5nLHEyMF9yYXRlKQogICAgICAgIHEzMD0kKHB5dGhvbjMge2dldF9qc29ufSB7aW5wdXQuanNvbn0gc3VtbWFyeSxhZnRlcl9maWx0ZXJpbmcscTMwX3JhdGUpCiAgICAgICAgY2hybV9udW09JChzYW10b29scyB2aWV3IC1jIHtpbnB1dC5iYW19IGNock0pCgoKCiAgICAgCiAgICAgICAgWyAiJChlY2hvICIkcmF3X3JlYWRfbnVtID49IDAiIHwgYmMpIiAtZXEgMSBdICYmIHJhd19yZWFkX251bT0xMDAwMDAwMDAwMDAKICAgICAgICBbICIkKGVjaG8gIiRjbGVhbl9yZWFkX251bSA+PSAwIiB8IGJjKSIgLWVxIDEgXSAmJiBjbGVhbl9yZWFkX251bT0xMDAwMDAwMDAwMDAKICAgICAgICBbICIkKGVjaG8gIiRjb3ZlciA+PSAwIiB8IGJjKSIgLWVxIDEgXSAmJiBjb3Zlcj0xMDAwMDAwMDAwMDAKICAgICAgICBbICIkKGVjaG8gIiRtYXBfcmVhZF9udW0gPj0gMCIgfCBiYykiIC1lcSAxIF0gJiYgbWFwX3JlYWRfbnVtPTEwMDAwMDAwMDAwMAogICAgICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgICAgICBzZXF1ZW5jZV9zaXplPSQoZWNobyAic2NhbGU9MjsgJHJhd19zaXplLzEwMDAwMDAwMDAiIHwgYmMpCiAgICAgICAgY2xlYW5fcmVhZF9yYXRpbz0xCiAgICAgICAgZHVwbGljYXRpb25fcmF0ZT0xCiAgICAgICAgIyBjbGVhbl9yZWFkX3JhdGlvPSQoZWNobyAic2NhbGU9MjsgJGNsZWFuX3JlYWRfbnVtLyRyYXdfcmVhZF9udW0iIHwgYmMpCiAgICAgICAgIyBkdXBsaWNhdGlvbl9yYXRlPSQoZWNobyAic2NhbGU9MjsgKCgkY2xlYW5fcmVhZF9udW0tJGRlX3JlYWRfbnVtKS8kcmF3X3JlYWRfbnVtIikrJGR1cF9yYWRpbzEgfCBiYykKICAgICAgICBtYXBfcmVhZF9yYXRpbz0kKGVjaG8gInNjYWxlPTI7ICRtYXBfcmVhZF9udW0vJGNsZWFuX3JlYWRfbnVtIiB8IGJjKQogICAgICAgIGF2ZXJhZ2VfZGVwdGg9JChlY2hvICJzY2FsZT0yOyAkbWFwX3NpemUvKCRjb3ZlciokcmVmX3NpemUqMC4wMSkiIHwgYmMpCiAgICAgICAgbWl0X3JhdGlvPSQoZWNobyAic2NhbGU9MjsgJGNocm1fbnVtLyRtYXBfcmVhZF9udW0iIHwgYmMpCgogICAgICAgIGdjX2ZpbHRlcl9yYXRpbz0kKGVjaG8gInNjYWxlPTI7ICRnYyIgfCBiYykKICAgICAgICBxMjBfZmlsdGVyX3JhdGlvPSQoZWNobyAic2NhbGU9MjsgJHEyMCIgfCBiYykKICAgICAgICBxMzBfZmlsdGVyX3JhdGlvPSQoZWNobyAic2NhbGU9MjsgJHEzMCIgfCBiYykKCgoKICAgICAgICBlY2hvIC1lICIkbmFtZQkkcmF3X3NpemUJJHJhd19yZWFkX251bQkkZHVwX3JhZGlvMQkkY2xlYW5fcmVhZF9udW0JJGRlX3JlYWRfbnVtCSRtYXBfcmVhZF9udW0JJGNvdmVyCSRyZWZfc2l6ZQkkbWFwX3NpemUJJGdjCSRxMjAJJHEzMAkkY2hybV9udW0iID4ge291dHB1dC5sb2d9CgogICAgICAgIGVjaG8gLWUgIiRuYW1lCSRzZXF1ZW5jZV9zaXplCSRjbGVhbl9yZWFkX3JhdGlvCSRkdXBsaWNhdGlvbl9yYXRlCSRtYXBfcmVhZF9yYXRpbwkkY292ZXIJJGF2ZXJhZ2VfZGVwdGgJJGdjX2ZpbHRlcl9yYXRpbwkkbWl0X3JhdGlvCSRxMjBfZmlsdGVyX3JhdGlvCSRxMzBfZmlsdGVyX3JhdGlvCSRyYXdfcmVhZF9udW0iID4+IHtvdXRwdXQubG9nfQogICAgICAgIJRoDmgRhpRljAVzaGVsbJSFlHSULg==", "rule": "get_log", "input": ["/data/cailab/flask_output/20240508211537-cdf3a1fe-70d7-43e3-b906-c7f604b80114/bam/1w_2_single.bam", "/data/cailab/flask_output/20240508211537-cdf3a1fe-70d7-43e3-b906-c7f604b80114/cover/1w_2/genome_results.txt", "/data/cailab/flask_output/20240508211537-cdf3a1fe-70d7-43e3-b906-c7f604b80114/debam/1w_2_dedup.bam", "/data/cailab/flask_output/20240508211537-cdf3a1fe-70d7-43e3-b906-c7f604b80114/trim/1w_2_single.json"], "log": [], "params": ["'1w_2'"], "shellcmd": "\n        name=$(echo 1w_2)\n        raw_size=$(python3 /data/cailab/flask_snk/ref/get_json.py /data/cailab/flask_output/20240508211537-cdf3a1fe-70d7-43e3-b906-c7f604b80114/trim/1w_2_single.json summary,before_filtering,total_bases)\n        raw_read_num=$(python3 /data/cailab/flask_snk/ref/get_json.py /data/cailab/flask_output/20240508211537-cdf3a1fe-70d7-43e3-b906-c7f604b80114/trim/1w_2_single.json summary,before_filtering,total_reads)\n        dup_radio1=$(python3 /data/cailab/flask_snk/ref/get_json.py /data/cailab/flask_output/20240508211537-cdf3a1fe-70d7-43e3-b906-c7f604b80114/trim/1w_2_single.json duplication,rate)\n\n        clean_read_num=$(samtools view -c /data/cailab/flask_output/20240508211537-cdf3a1fe-70d7-43e3-b906-c7f604b80114/bam/1w_2_single.bam) \n        de_read_num=$(samtools view -c /data/cailab/flask_output/20240508211537-cdf3a1fe-70d7-43e3-b906-c7f604b80114/debam/1w_2_dedup.bam)\n        map_read_num=$(samtools view -c -F 4 /data/cailab/flask_output/20240508211537-cdf3a1fe-70d7-43e3-b906-c7f604b80114/bam/1w_2_single.bam)\n        \n        cover=$(sed -n 's/.*There is a \\([0-9.]*\\)\\% of reference with a coverageData >= 1X.*/\\1/p' /data/cailab/flask_output/20240508211537-cdf3a1fe-70d7-43e3-b906-c7f604b80114/cover/1w_2/genome_results.txt)\n        ref_size=$(sed -n 's/.*number of bases = \\([0-9,]*\\) bp.*/\\1/p' /data/cailab/flask_output/20240508211537-cdf3a1fe-70d7-43e3-b906-c7f604b80114/cover/1w_2/genome_results.txt | tr -d ',')\n        map_size=$(sed -n 's/.*number of mapped bases = \\([0-9,]*\\) bp.*/\\1/p' /data/cailab/flask_output/20240508211537-cdf3a1fe-70d7-43e3-b906-c7f604b80114/cover/1w_2/genome_results.txt | tr -d ',')\n\n        gc=$(python3 /data/cailab/flask_snk/ref/get_json.py /data/cailab/flask_output/20240508211537-cdf3a1fe-70d7-43e3-b906-c7f604b80114/trim/1w_2_single.json summary,after_filtering,gc_content)\n        q20=$(python3 /data/cailab/flask_snk/ref/get_json.py /data/cailab/flask_output/20240508211537-cdf3a1fe-70d7-43e3-b906-c7f604b80114/trim/1w_2_single.json summary,after_filtering,q20_rate)\n        q30=$(python3 /data/cailab/flask_snk/ref/get_json.py /data/cailab/flask_output/20240508211537-cdf3a1fe-70d7-43e3-b906-c7f604b80114/trim/1w_2_single.json summary,after_filtering,q30_rate)\n        chrm_num=$(samtools view -c /data/cailab/flask_output/20240508211537-cdf3a1fe-70d7-43e3-b906-c7f604b80114/bam/1w_2_single.bam chrM)\n\n\n\n     \n        [ \"$(echo \"$raw_read_num >= 0\" | bc)\" -eq 1 ] && raw_read_num=100000000000\n        [ \"$(echo \"$clean_read_num >= 0\" | bc)\" -eq 1 ] && clean_read_num=100000000000\n        [ \"$(echo \"$cover >= 0\" | bc)\" -eq 1 ] && cover=100000000000\n        [ \"$(echo \"$map_read_num >= 0\" | bc)\" -eq 1 ] && map_read_num=100000000000\n        ########################################\n        sequence_size=$(echo \"scale=2; $raw_size/1000000000\" | bc)\n        clean_read_ratio=1\n        duplication_rate=1\n        # clean_read_ratio=$(echo \"scale=2; $clean_read_num/$raw_read_num\" | bc)\n        # duplication_rate=$(echo \"scale=2; (($clean_read_num-$de_read_num)/$raw_read_num\")+$dup_radio1 | bc)\n        map_read_ratio=$(echo \"scale=2; $map_read_num/$clean_read_num\" | bc)\n        average_depth=$(echo \"scale=2; $map_size/($cover*$ref_size*0.01)\" | bc)\n        mit_ratio=$(echo \"scale=2; $chrm_num/$map_read_num\" | bc)\n\n        gc_filter_ratio=$(echo \"scale=2; $gc\" | bc)\n        q20_filter_ratio=$(echo \"scale=2; $q20\" | bc)\n        q30_filter_ratio=$(echo \"scale=2; $q30\" | bc)\n\n\n\n        echo -e \"$name\t$raw_size\t$raw_read_num\t$dup_radio1\t$clean_read_num\t$de_read_num\t$map_read_num\t$cover\t$ref_size\t$map_size\t$gc\t$q20\t$q30\t$chrm_num\" > /data/cailab/flask_output/20240508211537-cdf3a1fe-70d7-43e3-b906-c7f604b80114/final_log/1w_2.log\n\n        echo -e \"$name\t$sequence_size\t$clean_read_ratio\t$duplication_rate\t$map_read_ratio\t$cover\t$average_depth\t$gc_filter_ratio\t$mit_ratio\t$q20_filter_ratio\t$q30_filter_ratio\t$raw_read_num\" >> /data/cailab/flask_output/20240508211537-cdf3a1fe-70d7-43e3-b906-c7f604b80114/final_log/1w_2.log\n        ", "incomplete": false, "starttime": 1715174181.9533203, "endtime": 1715174182.3083463, "job_hash": 8773826288781, "conda_env": "bmFtZTogZmxhc2syMDI0CmNoYW5uZWxzOgogIC0gY29uZGEtZm9yZ2UKICAtIGJpb2NvbmRhCiAgLSBkZWZhdWx0cwpkZXBlbmRlbmNpZXM6CiAgLSBfbGliZ2NjX211dGV4PTAuMT1jb25kYV9mb3JnZQogIC0gX29wZW5tcF9tdXRleD00LjU9Ml9nbnUKICAtIGJ6aXAyPTEuMC44PWhkNTkwMzAwXzUKICAtIGNhLWNlcnRpZmljYXRlcz0yMDI0LjIuMj1oYmNjYTA1NF8wCiAgLSBsZF9pbXBsX2xpbnV4LTY0PTIuNDA9aDU1ZGI2NmVfMAogIC0gbGliZmZpPTMuNC4yPWg3Zjk4ODUyXzUKICAtIGxpYmdjYy1uZz0xMy4yLjA9aGM4ODFjYzRfNgogIC0gbGliZ29tcD0xMy4yLjA9aGM4ODFjYzRfNgogIC0gbGlibnNsPTIuMC4xPWhkNTkwMzAwXzAKICAtIGxpYnNxbGl0ZT0zLjQ1LjM9aDI3OTcwMDRfMAogIC0gbGlidXVpZD0yLjM4LjE9aDBiNDFiZjRfMAogIC0gbGlieGNyeXB0PTQuNC4zNj1oZDU5MDMwMF8xCiAgLSBsaWJ6bGliPTEuMi4xMz1oZDU5MDMwMF81CiAgLSBuY3Vyc2VzPTYuNC4yMDI0MDIxMD1oNTk1OTVlZF8wCiAgLSBvcGVuc3NsPTMuMi4xPWhkNTkwMzAwXzEKICAtIHBpcD0yNC4wPXB5aGQ4ZWQxYWJfMAogIC0gcHl0aG9uPTMuOS4xOT1oMDc1NTY3NV8wX2NweXRob24KICAtIHJlYWRsaW5lPTguMj1oODIyODUxMF8xCiAgLSBzZXR1cHRvb2xzPTY5LjUuMT1weWhkOGVkMWFiXzAKICAtIHRrPTguNi4xMz1ub3hmdF9oNDg0NWYzMF8xMDEKICAtIHdoZWVsPTAuNDMuMD1weWhkOGVkMWFiXzEKICAtIHh6PTUuMi42PWgxNjZiZGFmXzAKICAtIHBpcDoKICAgICAgLSBhcHBkaXJzPT0xLjQuNAogICAgICAtIGF0dHJzPT0yMy4yLjAKICAgICAgLSBiaW89PTEuNi4yCiAgICAgIC0gYmlvcHl0aG9uPT0xLjgzCiAgICAgIC0gYmlvdGhpbmdzLWNsaWVudD09MC4zLjEKICAgICAgLSBibGlua2VyPT0xLjguMQogICAgICAtIGJvb3RzdHJhcC1mbGFzaz09Mi40LjAKICAgICAgLSBjZXJ0aWZpPT0yMDI0LjIuMgogICAgICAtIGNoYXJzZXQtbm9ybWFsaXplcj09My4zLjIKICAgICAgLSBjbGljaz09OC4xLjcKICAgICAgLSBjb25maWdhcmdwYXJzZT09MS43CiAgICAgIC0gY29ubmVjdGlvbi1wb29sPT0wLjAuMwogICAgICAtIGRhdHJpZT09MC44LjIKICAgICAgLSBkb2N1dGlscz09MC4yMS4yCiAgICAgIC0gZHBhdGg9PTIuMS42CiAgICAgIC0gZmFzdGpzb25zY2hlbWE9PTIuMTkuMQogICAgICAtIGZsYXNrPT0zLjAuMwogICAgICAtIGZsYXNrLXd0Zj09MS4yLjEKICAgICAgLSBnaXRkYj09NC4wLjExCiAgICAgIC0gZ2l0cHl0aG9uPT0zLjEuNDMKICAgICAgLSBncHJvZmlsZXItb2ZmaWNpYWw9PTEuMC4wCiAgICAgIC0gZ3VuaWNvcm49PTIyLjAuMAogICAgICAtIGh1bWFuZnJpZW5kbHk9PTEwLjAKICAgICAgLSBpZG5hPT0zLjcKICAgICAgLSBpbXBvcnRsaWItbWV0YWRhdGE9PTcuMS4wCiAgICAgIC0gaXRzZGFuZ2Vyb3VzPT0yLjIuMAogICAgICAtIGppbmphMj09My4xLjMKICAgICAgLSBqc29uc2NoZW1hPT00LjIxLjEKICAgICAgLSBqc29uc2NoZW1hLXNwZWNpZmljYXRpb25zPT0yMDIzLjEyLjEKICAgICAgLSBqdXB5dGVyLWNvcmU9PTUuNy4yCiAgICAgIC0gbGV2ZW5zaHRlaW49PTAuMjUuMQogICAgICAtIG1hcmt1cHNhZmU9PTIuMS41CiAgICAgIC0gbXlnZW5lPT0zLjIuMgogICAgICAtIG5iZm9ybWF0PT01LjEwLjQKICAgICAgLSBudW1weT09MS4yNi40CiAgICAgIC0gcGFja2FnaW5nPT0yNC4wCiAgICAgIC0gcGFuZGFzPT0yLjIuMgogICAgICAtIHBsYWM9PTEuNC4zCiAgICAgIC0gcGxhdGZvcm1kaXJzPT00LjIuMQogICAgICAtIHBvb2NoPT0xLjguMQogICAgICAtIHBzdXRpbD09NS45LjgKICAgICAgLSBwdWxwPT0yLjguMAogICAgICAtIHB5c2FtPT0wLjIyLjEKICAgICAgLSBweXRob24tZGF0ZXV0aWw9PTIuOS4wLnBvc3QwCiAgICAgIC0gcHl0ej09MjAyNC4xCiAgICAgIC0gcHl5YW1sPT02LjAuMQogICAgICAtIHJhcGlkZnV6ej09My45LjAKICAgICAgLSByZWZlcmVuY2luZz09MC4zNS4wCiAgICAgIC0gcmVxdWVzdHM9PTIuMzEuMAogICAgICAtIHJlcmV0cnk9PTAuMTEuOAogICAgICAtIHJwZHMtcHk9PTAuMTguMAogICAgICAtIHNpeD09MS4xNi4wCiAgICAgIC0gc21hcnQtb3Blbj09Ny4wLjQKICAgICAgLSBzbW1hcD09NS4wLjEKICAgICAgLSBzdG9waXQ9PTEuMS4yCiAgICAgIC0gdGFidWxhdGU9PTAuOS4wCiAgICAgIC0gdGhyb3R0bGVyPT0xLjIuMgogICAgICAtIHRvcG9zb3J0PT0xLjEwCiAgICAgIC0gdHFkbT09NC42Ni40CiAgICAgIC0gdHJhaXRsZXRzPT01LjE0LjMKICAgICAgLSB0emRhdGE9PTIwMjQuMQogICAgICAtIHVybGxpYjM9PTIuMi4xCiAgICAgIC0gd2Vya3pldWc9PTMuMC4yCiAgICAgIC0gd3JhcHQ9PTEuMTYuMAogICAgICAtIHd0Zm9ybXM9PTMuMS4yCiAgICAgIC0geXRlPT0xLjUuNAogICAgICAtIHppcHA9PTMuMTguMQpwcmVmaXg6IC9kYXRhL2Jpb3NvZnQvc29mdDIwMjQvY29uZGEvYW5hY29uZGFfMjMuNC43L2VudnMvZmxhc2syMDI0Cg==", "container_img_url": null, "input_checksums": {"/data/cailab/flask_output/20240508211537-cdf3a1fe-70d7-43e3-b906-c7f604b80114/trim/1w_2_single.json": "96ffc47330eeceabd6af55c5819848efc7152c1d9f3b57fb291f22a8aa9fc1ea", "/data/cailab/flask_output/20240508211537-cdf3a1fe-70d7-43e3-b906-c7f604b80114/cover/1w_2/genome_results.txt": "e5ce4f105866a2d9faf89cec8e4c07da1925912325ce0eb628b5d3a4d2e5a2e4"}}